<div class="notif-card">
  <h3>Configuración Global de Notificaciones</h3>
  <form [formGroup]="preferencesForm" (ngSubmit)="onSubmit()">
    <!-- Configuración básica -->
    <div class="form-group">
      <label>Email para notificaciones</label>
      <input type="email" class="form-control" formControlName="email">
    </div>

    <div class="form-group">
      <label>Tipo de notificación</label>
      <select class="form-control" formControlName="notificationType">
        <option value="browser">Navegador</option>
        <option value="email">Email</option>
        <option value="both">Ambos</option>
      </select>
    </div>

    <!-- Recordatorios de vencimiento -->
    <div class="section" formGroupName="globalReminders">
      <h4>Recordatorios de Vencimiento</h4>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="dueDateReminder">
        <label class="form-check-label">Activar recordatorios de vencimiento</label>
      </div>
      <div class="form-group" *ngIf="preferencesForm.get('globalReminders.dueDateReminder')?.value">
        <label>Tiempo de anticipación</label>
        <select class="form-control" formControlName="dueDateReminderTime">
          <option value="1h">1 hora antes</option>
          <option value="6h">6 horas antes</option>
          <option value="12h">12 horas antes</option>
          <option value="1d">1 día antes</option>
          <option value="2d">2 días antes</option>
        </select>
      </div>
    </div>

    <!-- Recordatorios de seguimiento -->
    <div class="section" formGroupName="globalReminders">
      <h4>Recordatorios de Seguimiento</h4>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="followUpReminder">
        <label class="form-check-label">Activar recordatorios de seguimiento</label>
      </div>
      <div class="form-group" *ngIf="preferencesForm.get('globalReminders.followUpReminder')?.value">
        <label>Días sin actividad</label>
        <select class="form-control" formControlName="followUpDays">
          <option value="1">1 día</option>
          <option value="3">3 días</option>
          <option value="7">1 semana</option>
        </select>
      </div>
    </div>

    <!-- Resúmenes -->
    <div class="section" formGroupName="globalReminders">
      <h4>Resúmenes</h4>
      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="dailySummary">
        <label class="form-check-label">Resumen diario</label>
      </div>
      <div class="form-group" *ngIf="preferencesForm.get('globalReminders.dailySummary')?.value">
        <label>Hora del resumen diario</label>
        <input type="time" class="form-control" formControlName="dailySummaryTime">
      </div>

      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="weeklySummary">
        <label class="form-check-label">Resumen semanal</label>
      </div>
      <div class="form-group" *ngIf="preferencesForm.get('globalReminders.weeklySummary')?.value">
        <label>Día del resumen semanal</label>
        <select class="form-control" formControlName="weeklySummaryDay">
          <option value="monday">Lunes</option>
          <option value="tuesday">Martes</option>
          <option value="wednesday">Miércoles</option>
          <option value="thursday">Jueves</option>
          <option value="friday">Viernes</option>
          <option value="saturday">Sábado</option>
          <option value="sunday">Domingo</option>
        </select>
        <label>Hora del resumen semanal</label>
        <input type="time" class="form-control" formControlName="weeklySummaryTime">
      </div>
    </div>

    <!-- Configuración general -->
    <div class="section" formGroupName="globalReminders">
      <h4>Configuración General</h4>
      <div class="form-group">
        <label>Prioridad mínima para notificar</label>
        <select class="form-control" formControlName="minPriority">
          <option value="1">Alta</option>
          <option value="2">Media</option>
          <option value="3">Baja</option>
        </select>
      </div>

      <div class="form-check">
        <input type="checkbox" class="form-check-input" formControlName="weekendNotifications">
        <label class="form-check-label">Recibir notificaciones en fin de semana</label>
      </div>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="!preferencesForm.valid || isSubmitting">
      {{ isSubmitting ? 'Guardando...' : 'Guardar Preferencias' }}
    </button>
  </form>
</div>
