spring.application.name=ToDoList


# application.properties

# Configuración de la base de datos MySQL
spring.datasource.url=jdbc:mysql://localhost:3306/todolist?useSSL=false&serverTimezone=UTC
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.naming.implicit-strategy=org.hibernate.boot.model.naming.ImplicitNamingStrategyLegacyJpaImpl
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.jpa.open-in-view=false

# Dialecto de Hibernate para MySQL 8
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# Mostrar las consultas SQL en consola (útil para desarrollo)
spring.jpa.show-sql=true

# Actualizar el esquema automáticamente (solo para desarrollo)
spring.jpa.hibernate.ddl-auto=update

# Puerto del servidor
server.port=8080

# Configuración de zona horaria
spring.jpa.properties.hibernate.jdbc.time_zone=UTC

# Configuración de codificación
spring.datasource.hikari.connection-init-sql=SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci

# Seguridad: Permitir cookies SameSite (para autenticación basada en cookies)
server.servlet.session.cookie.same-site=strict

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=grodt.devmail@gmail.com
spring.mail.password=ooxviqbjfbneeraa
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000
spring.mail.properties.mail.smtp.from=grodt.devmail@gmail.com
spring.mail.properties.mail.smtp.localhost=localhost
spring.mail.properties.mail.smtp.quitwait=false


# OpenAPI/Swagger Configuration
springdoc.api-docs.enabled=true
springdoc.swagger-ui.enabled=true
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operationsSorter=method
springdoc.swagger-ui.tagsSorter=alpha
springdoc.swagger-ui.tryItOutEnabled=true
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.disable-swagger-default-url=true
springdoc.swagger-ui.config-url=/api-docs/swagger-config
springdoc.swagger-ui.url=/api-docs

# Redis Cloud Configuration
spring.data.redis.host=redis-18892.c15.us-east-1-4.ec2.redns.redis-cloud.com
spring.data.redis.port=18892
spring.data.redis.password=PvIV5PLObG2O2GdZ01MMzPP4xrvuFIfE
spring.data.redis.ssl.enabled=false
spring.data.redis.timeout=60000

# Cache Configuration
# Deshabilitar caché completamente
spring.cache.type=redis
spring.cache.redis.time-to-live=600000
spring.cache.redis.key-prefix=todolist:
spring.cache.redis.use-key-prefix=true
spring.cache.redis.cache-null-values=false

# Redis Connection Pool
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# Logging para debug de caché
logging.level.org.springframework.cache=DEBUG

# Logging para debug
logging.level.org.springframework.data.redis=DEBUG
logging.level.io.lettuce=DEBUG
logging.level.com.tonilr.ToDoList=DEBUG
logging.level.org.springframework.mail=DEBUG

# Configuración de JWT
app.jwtSecret=${JWT_SECRET:404E635266556A586E3272357538782F413F4428472B4B6250645367566B5970}
app.jwtExpirationInMs=${JWT_EXPIRATION:86400000}

app.frontend.url=http://localhost:4200

spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true

# Spring Boot Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.metrics.enabled=true
management.endpoint.info.enabled=true

# Métricas específicas - HABILITAR
management.metrics.export.simple.enabled=true
management.metrics.enable.jvm=true
management.metrics.enable.process=true
management.metrics.enable.hikaricp=true

# Info build habilitado
management.info.env.enabled=true
management.info.build.enabled=true

# Configuración de Programación para Railway
app.schedule.enabled=true
app.schedule.work-days=MONDAY,TUESDAY,WEDNESDAY,THURSDAY,FRIDAY
app.schedule.work-start=10:00
app.schedule.work-end=19:00
app.schedule.shutdown-delay=300000

# Optimizaciones JVM para menor uso de memoria
spring.jvm.memory=-Xms256m -Xmx512m -XX:+UseG1GC -XX:+UseStringDeduplication
spring.jvm.memory=-XX:+OptimizeStringConcat -XX:+UseCompressedOops
spring.jvm.memory=-XX:+UseCompressedClassPointers -XX:+TieredCompilation
spring.jvm.memory=-XX:TieredStopAtLevel=1 -XX:+UseSerialGC

# Reducir logging
logging.level.root=WARN
logging.level.com.tonilr=INFO
logging.level.org.springframework=WARN

